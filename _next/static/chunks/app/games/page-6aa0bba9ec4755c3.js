(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[423],{4929:function(e,t,n){Promise.resolve().then(n.bind(n,9227)),Promise.resolve().then(n.bind(n,3263)),Promise.resolve().then(n.bind(n,7168))},9227:function(e,t,n){"use strict";n.d(t,{DGTBoard:function(){return $}});var r,l,a,s,i,c,o,d,u,f,h,m,p=n(7437),g=n(2265),x=n(1562),v=n(4224),b=n(2451),j=n(407),w=n(2300),k=n(4090),y=n(2381),N=n(3804),E=n(641),M=n(3448),L=n(1329),C=n.n(L);function R(e){let{active:t,scrollAreaRef:n,undoCount:r,onClick:l,isTableCell:a=!1,noStyles:s=!1,children:i}=e,c=(0,g.useRef)(null);(0,g.useEffect)(()=>{if(!t||!n.current||!c.current)return;let e=n.current.querySelector("[data-radix-scroll-area-viewport]");if(!e)return;let r=a?"Top":"Left",l=a?"Height":"Width",s=c.current["offset".concat(r)],i=s+c.current["offset".concat(l)],o=e["scroll".concat(r)],d=o+e["client".concat(l)];s>=o&&i<=d||e.scrollTo({[r.toLowerCase()]:s,behavior:"instant"})},[r]);let o=a?N.pj:"div";return(0,p.jsx)(o,{ref:c,onClick:l,className:(0,M.cn)(!s&&"cursor-pointer",!s&&t&&"font-bold"),children:i})}function O(e){let{squareWidth:t,arrow:n}=e;function r(e){return{x:e%8*t+t/2,y:Math.floor(e/8)*t+t/2}}let l=t/8,a=4*l,s=.26*a,i=r(n.startIndex),c=r(n.endIndex),o=Math.atan2(c.y-i.y,c.x-i.x),d=c.x-i.x,u=c.y-i.y,f=Math.sqrt(d*d+u*u),h=c.x-s*Math.cos(o),m=c.y-s*Math.sin(o);return(0,p.jsxs)("g",{opacity:"0.8",children:[(0,p.jsx)("line",{x1:i.x+d/f*(t/6),y1:i.y+u/f*(t/6),x2:h-a*Math.cos(o),y2:m-a*Math.sin(o),strokeLinecap:"square",stroke:"#ffaa00",strokeWidth:l}),(0,p.jsx)("polygon",{points:"".concat(h,",").concat(m,"\n              ").concat(h-a*Math.cos(o-Math.PI/6),",\n              ").concat(m-a*Math.sin(o-Math.PI/6)," \n              ").concat(h-a*Math.cos(o+Math.PI/6),",\n              ").concat(m-a*Math.sin(o+Math.PI/6)),fill:"#ffaa00",stroke:"#ffaa00",strokeWidth:l,strokeLinejoin:"miter"})]})}var S=n(4746);function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function W(){return(W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function A(){return(A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function D(){return(D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function V(){return(V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}let H={P:function(e){return S.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),r||(r=S.createElement("path",{fill:"#fff",stroke:"#000",strokeLinecap:"round",strokeWidth:1.5,d:"M22.5 9c-2.21 0-4 1.79-4 4 0 .89.29 1.71.78 2.38C17.33 16.5 16 18.59 16 21c0 2.03.94 3.84 2.41 5.03-3 1.06-7.41 5.55-7.41 13.47h23c0-7.92-4.41-12.41-7.41-13.47 1.47-1.19 2.41-3 2.41-5.03 0-2.41-1.33-4.5-3.28-5.62.49-.67.78-1.49.78-2.38 0-2.21-1.79-4-4-4z"})))},R:function(e){return S.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),a||(a=S.createElement("g",{fill:"#fff",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("path",{strokeLinecap:"butt",d:"M9 39h27v-3H9zm3-3v-4h21v4zm-1-22V9h4v2h5V9h5v2h5V9h4v5"}),S.createElement("path",{d:"m34 14-3 3H14l-3-3"}),S.createElement("path",{strokeLinecap:"butt",strokeLinejoin:"miter",d:"M31 17v12.5H14V17"}),S.createElement("path",{d:"m31 29.5 1.5 2.5h-20l1.5-2.5"}),S.createElement("path",{fill:"none",strokeLinejoin:"miter",d:"M11 14h23"}))))},N:function(e){return S.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),i||(i=S.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("path",{fill:"#fff",d:"M22 10c10.5 1 16.5 8 16 29H15c0-9 10-6.5 8-21"}),S.createElement("path",{fill:"#fff",d:"M24 18c.38 2.91-5.55 7.37-8 9-3 2-2.82 4.34-5 4-1.042-.94 1.41-3.04 0-3-1 0 .19 1.23-1 2-1 0-4.003 1-4-4 0-2 6-12 6-12s1.89-1.9 2-3.5c-.73-.994-.5-2-.5-3 1-1 3 2.5 3 2.5h2s.78-1.992 2.5-3c1 0 1 3 1 3"}),S.createElement("path",{fill:"#000",d:"M9.5 25.5a.5.5 0 1 1-1 0 .5.5 0 1 1 1 0m5.433-9.75a.5 1.5 30 1 1-.866-.5.5 1.5 30 1 1 .866.5"}))))},B:function(e){return S.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),o||(o=S.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("g",{fill:"#fff",strokeLinecap:"butt"},S.createElement("path",{d:"M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.46-13.5-1-3.39 1.46-10.11.03-13.5 1-1.35.49-2.32.47-3-.5 1.35-1.94 3-2 3-2z"}),S.createElement("path",{d:"M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z"}),S.createElement("path",{d:"M25 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 1 1 5 0z"})),S.createElement("path",{strokeLinejoin:"miter",d:"M17.5 26h10M15 30h15m-7.5-14.5v5M20 18h5"}))))},Q:function(e){return S.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),u||(u=S.createElement("g",{fill:"#fff",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("path",{d:"M8 12a2 2 0 1 1-4 0 2 2 0 1 1 4 0m16.5-4.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0M41 12a2 2 0 1 1-4 0 2 2 0 1 1 4 0M16 8.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0M33 9a2 2 0 1 1-4 0 2 2 0 1 1 4 0"}),S.createElement("path",{strokeLinecap:"butt",d:"M9 26c8.5-1.5 21-1.5 27 0l2-12-7 11V11l-5.5 13.5-3-15-3 15-5.5-14V25L7 14z"}),S.createElement("path",{strokeLinecap:"butt",d:"M9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1.5 2.5-1.5 2.5-1.5 1.5.5 2.5.5 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0z"}),S.createElement("path",{fill:"none",d:"M11.5 30c3.5-1 18.5-1 22 0M12 33.5c6-1 15-1 21 0"}))))},K:function(e){return S.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),h||(h=S.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("path",{strokeLinejoin:"miter",d:"M22.5 11.63V6M20 8h5"}),S.createElement("path",{fill:"#fff",strokeLinecap:"butt",strokeLinejoin:"miter",d:"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5"}),S.createElement("path",{fill:"#fff",d:"M11.5 37c5.5 3.5 15.5 3.5 21 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-3.5-7.5-13-10.5-16-4-3 6 5 10 5 10z"}),S.createElement("path",{d:"M11.5 30c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0"}))))},p:function(e){return S.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),l||(l=S.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeWidth:1.5,d:"M22.5 9a4 4 0 0 0-3.22 6.38 6.48 6.48 0 0 0-.87 10.65c-3 1.06-7.41 5.55-7.41 13.47h23c0-7.92-4.41-12.41-7.41-13.47a6.46 6.46 0 0 0-.87-10.65A4.01 4.01 0 0 0 22.5 9z"})))},r:function(e){return S.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),s||(s=S.createElement("g",{fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("path",{strokeLinecap:"butt",d:"M9 39h27v-3H9zm3.5-7 1.5-2.5h17l1.5 2.5zm-.5 4v-4h21v4z"}),S.createElement("path",{strokeLinecap:"butt",strokeLinejoin:"miter",d:"M14 29.5v-13h17v13z"}),S.createElement("path",{strokeLinecap:"butt",d:"M14 16.5 11 14h23l-3 2.5zM11 14V9h4v2h5V9h5v2h5V9h4v5z"}),S.createElement("path",{fill:"none",stroke:"#ececec",strokeLinejoin:"miter",strokeWidth:1,d:"M12 35.5h21m-20-4h19m-18-2h17m-17-13h17M11 14h23"}))))},n:function(e){return S.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),c||(c=S.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("path",{fill:"#000",d:"M22 10c10.5 1 16.5 8 16 29H15c0-9 10-6.5 8-21"}),S.createElement("path",{fill:"#000",d:"M24 18c.38 2.91-5.55 7.37-8 9-3 2-2.82 4.34-5 4-1.04-.94 1.41-3.04 0-3-1 0 .19 1.23-1 2-1 0-4 1-4-4 0-2 6-12 6-12s1.89-1.9 2-3.5c-.73-1-.5-2-.5-3 1-1 3 2.5 3 2.5h2s.78-2 2.5-3c1 0 1 3 1 3"}),S.createElement("path",{fill:"#ececec",stroke:"#ececec",d:"M9.5 25.5a.5.5 0 1 1-1 0 .5.5 0 1 1 1 0m5.43-9.75a.5 1.5 30 1 1-.86-.5.5 1.5 30 1 1 .86.5"}),S.createElement("path",{fill:"#ececec",stroke:"none",d:"m24.55 10.4-.45 1.45.5.15c3.15 1 5.65 2.49 7.9 6.75S35.75 29.06 35.25 39l-.05.5h2.25l.05-.5c.5-10.06-.88-16.85-3.25-21.34s-5.79-6.64-9.19-7.16z"}))))},b:function(e){return S.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),d||(d=S.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("g",{fill:"#000",strokeLinecap:"butt"},S.createElement("path",{d:"M9 36c3.4-1 10.1.4 13.5-2 3.4 2.4 10.1 1 13.5 2 0 0 1.6.5 3 2-.7 1-1.6 1-3 .5-3.4-1-10.1.5-13.5-1-3.4 1.5-10.1 0-13.5 1-1.4.5-2.3.5-3-.5 1.4-2 3-2 3-2z"}),S.createElement("path",{d:"M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z"}),S.createElement("path",{d:"M25 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 1 1 5 0z"})),S.createElement("path",{stroke:"#ececec",strokeLinejoin:"miter",d:"M17.5 26h10M15 30h15m-7.5-14.5v5M20 18h5"}))))},q:function(e){return S.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),f||(f=S.createElement("g",{fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("g",{stroke:"none"},S.createElement("circle",{cx:6,cy:12,r:2.75}),S.createElement("circle",{cx:14,cy:9,r:2.75}),S.createElement("circle",{cx:22.5,cy:8,r:2.75}),S.createElement("circle",{cx:31,cy:9,r:2.75}),S.createElement("circle",{cx:39,cy:12,r:2.75})),S.createElement("path",{strokeLinecap:"butt",d:"M9 26c8.5-1.5 21-1.5 27 0l2.5-12.5L31 25l-.3-14.1-5.2 13.6-3-14.5-3 14.5-5.2-13.6L14 25 6.5 13.5z"}),S.createElement("path",{strokeLinecap:"butt",d:"M9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1.5 2.5-1.5 2.5-1.5 1.5.5 2.5.5 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0z"}),S.createElement("path",{fill:"none",strokeLinecap:"butt",d:"M11 38.5a35 35 1 0 0 23 0"}),S.createElement("path",{fill:"none",stroke:"#ececec",d:"M11 29a35 35 1 0 1 23 0m-21.5 2.5h20m-21 3a35 35 1 0 0 22 0m-23 3a35 35 1 0 0 24 0"}))))},k:function(e){return S.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45 45"},e),m||(m=S.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("path",{strokeLinejoin:"miter",d:"M22.5 11.6V6"}),S.createElement("path",{fill:"#000",strokeLinecap:"butt",strokeLinejoin:"miter",d:"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5"}),S.createElement("path",{fill:"#000",d:"M11.5 37a22.3 22.3 0 0 0 21 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-3.5-7.5-13-10.5-16-4-3 6 5 10 5 10z"}),S.createElement("path",{strokeLinejoin:"miter",d:"M20 8h5"}),S.createElement("path",{stroke:"#ececec",d:"M32 29.5s8.5-4 6-9.7C34.1 14 25 18 22.5 24.6v2.1-2.1C20 18 9.9 14 7 19.9c-2.5 5.6 4.8 9 4.8 9"}),S.createElement("path",{stroke:"#ececec",d:"M11.5 30c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0"}))))}};function F(e){let{index:t,piece:n,isHighlighted:r,isYellow:l,check:a,squareWidth:s,onRightClick:i,onRightRelease:c}=e,o=8-Math.floor(t/8),d=String.fromCharCode(97+t%8),u=null==n?null:H[n];return(0,p.jsxs)("div",{onContextMenu:e=>{e.preventDefault(),i()},onMouseUp:e=>{2===e.button&&c()},className:(0,M.cn)("w-full aspect-square relative leading-none",a&&"bg-[radial-gradient(ellipse_at_center,_rgb(255,0,0)_0%,_rgb(231,0,0)_25%,_rgba(169,0,0,0)_89%,_rgba(158,0,0,0)_100%)]",(Math.floor(t/8)+t%8)%2==0?r?"bg-[#ee7965] text-[#e46956]":l?"bg-[#f6eb81] text-[#dcc35a]":"bg-[#eed6b2] text-[#ba8765]":r?"bg-[#e46956] text-[#ee7965]":l?"bg-[#dcc35a] text-[#f6eb81]":"bg-[#ba8765] text-[hsl(36,64%,82%)]"),children:["a"===d&&(0,p.jsx)("div",{className:"absolute top-[2px] left-[2px]",style:{fontSize:s/5},children:o}),1===o&&(0,p.jsx)("div",{className:"absolute bottom-[2px] right-[2px]",style:{fontSize:s/5},children:d}),null!=u&&(0,p.jsx)(u,{})]})}var K=n(1629);function U(e){let{fen:t,previousMove:n,check:r}=e,[l,a]=(0,g.useState)([]),[s,i]=(0,g.useState)(),[c,o]=(0,g.useState)([]),[d,u]=(0,g.useState)(0),f=(0,g.useRef)(null),h=(0,K.S)(t);return(0,k.O)("resize",()=>{var e;f.current&&u(null===(e=f.current)||void 0===e?void 0:e.clientWidth)}),(0,g.useEffect)(()=>{var e;f.current&&u(null===(e=f.current)||void 0===e?void 0:e.clientWidth)},[]),(0,p.jsxs)("div",{ref:f,className:"aspect-square grid grid-cols-8 grid-rows-8 relative",onClick:()=>{o(e=>e.filter(e=>e.fen!==t)),a(e=>e.filter(e=>e.fen!==t))},children:[h.flat().map((e,u)=>(0,p.jsx)(F,{index:u,squareWidth:d/8,piece:e,isHighlighted:l.filter(e=>e.fen===t).map(e=>e.index).includes(u),isYellow:null!=n&&[Y(n.from),Y(n.to)].includes(u),check:"w"===r&&"K"===e||"b"===r&&"k"===e,onRightClick:()=>i(u),onRightRelease:()=>{s===u?function(e){let n=l.map(e=>e.index);if(n.includes(e))return a(t=>t.toSpliced(n.indexOf(e),1));a(n=>[...n,{index:e,fen:t}])}(u):function(e){if(null==s)return;let n=c.map(e=>"".concat(e.startIndex).concat(e.endIndex)),r="".concat(s).concat(e);if(n.includes(r))return o(e=>e.toSpliced(n.indexOf(r),1));o(n=>[...n,{startIndex:s,endIndex:e,fen:t}])}(u),i(void 0)}},u)),(0,p.jsx)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:c.filter(e=>e.fen===t).map(e=>(0,p.jsx)(O,{squareWidth:d/8,arrow:e},"".concat(e.startIndex).concat(e.endIndex)))})]})}function Y(e){let t=e.charCodeAt(0)-97;return 8*(8-parseInt(e[1],10))+t}var G=n(7254);function Q(e){var t;let{undoCount:n,result:r,turn:l,thinkTime:a,player:s,className:i}=e,c=null!==(t=s.timestamps.at(-Math.ceil((n+1+Number(l))/2)))&&void 0!==t?t:5400;return 0===n&&"*"===r&&l&&(c-=a),(0,p.jsxs)("div",{className:(0,M.cn)("flex justify-between gap-2 w-full px-2 py-1 font-bold",i),children:[(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsxs)("div",{className:"font-bold",children:[s.title&&"".concat(s.title," "),s.name]}),(0,p.jsx)("div",{children:s.elo})]}),(0,p.jsx)("div",{className:0!==n?void 0:"win"===r?"text-green-500":"loss"===r?"text-red-500":"*"===r&&l?"text-orange-500":void 0,children:0!==n||"*"===r?(0,G.ZC)(c):"win"===r?1:"loss"===r?0:"1/2"})]})}function $(e){let{gameData:{white:t,black:n,moves:r,result:l,thinkTime:a}}=e,[s,i]=(0,g.useState)(new x.qQ),[c,o]=(0,g.useState)(0),[d,u]=(0,g.useState)(0),[f,h]=(0,g.useState)(!0),m=(0,g.useRef)(!1),L=(0,g.useRef)(null),O=(0,g.useRef)(null),S=(0,g.useRef)(null),z=(0,g.useRef)(null),W=(0,g.useMemo)(()=>s.history().length,[s]);function T(){let e={...s};e.reset(),i(e),o(r.length)}function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t={...s};t.load_pgn(J(e)),i(t)}function B(){if(c===r.length)return;let e={...s};e.undo(),i(e),o(e=>e+1)}function _(){if(0===c||!r.at(-c))return;let e={...s};1===c?e.load_pgn(J(r)):e.load_pgn(J(r.slice(0,length-(c-1)))),i(e),o(e=>e-1)}(0,g.useEffect)(()=>{if(null==a||"*"!==l)return;let e=Date.now(),t=setInterval(()=>{u(Math.floor((Date.now()-e)/1e3))},1e3);return()=>clearInterval(t)},[a,l,r.length]),(0,k.O)("keydown",e=>{m.current&&("ArrowLeft"===e.key&&(e.preventDefault(),B()),"ArrowRight"===e.key&&(e.preventDefault(),_()),"ArrowUp"===e.key&&(e.preventDefault(),T()),"ArrowDown"===e.key&&(e.preventDefault(),A(),o(0)))}),(0,g.useEffect)(()=>{A(),o(0)},[r.length]),(0,g.useEffect)(()=>{let e=s.history().at(-1);if(navigator.userActivation.hasBeenActive&&e&&W&&S.current&&z.current){if(f)return h(!1);e.includes("x")?(z.current.currentTime=0,z.current.play()):(S.current.currentTime=0,S.current.play())}},[W,r.length]);let P=s.history({verbose:!0}).at(-1);return(0,p.jsxs)("div",{className:"@container",children:[(0,p.jsx)("audio",{ref:S,src:"move.mp3"}),(0,p.jsx)("audio",{ref:z,src:"capture.mp3"}),(0,p.jsxs)("div",{className:"flex flex-col @lg:flex-row gap-2",onMouseEnter:()=>m.current=!0,onMouseLeave:()=>m.current=!1,children:[(0,p.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(Q,{className:"bg-gray-800 text-white",undoCount:c,turn:"b"===s.turn(),result:{"0-1":"win","1-0":"loss","1/2-1/2":"draw","*":"*"}[l],thinkTime:(null!=a?a:0)+d,player:n}),(0,p.jsx)(U,{fen:s.fen(),previousMove:P?{from:P.from,to:P.to}:void 0,check:s.in_check()?s.turn():void 0}),(0,p.jsx)(Q,{className:"bg-gray-200 text-black",undoCount:c,turn:"w"===s.turn(),result:{"1-0":"win","0-1":"loss","1/2-1/2":"draw","*":"*"}[l],thinkTime:(null!=a?a:0)+d,player:t})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(y.z,{className:"w-full",onClick:T,disabled:c===r.length,children:(0,p.jsx)(v.Z,{})}),(0,p.jsx)(y.z,{className:"w-full",onClick:B,disabled:c===r.length,children:(0,p.jsx)(b.Z,{})}),(0,p.jsx)(y.z,{className:"w-full",onClick:_,disabled:0===c,children:(0,p.jsx)(j.Z,{})}),(0,p.jsx)(y.z,{className:"w-full",onClick:()=>{A(),o(0)},disabled:0===c,children:(0,p.jsx)(w.Z,{})})]})]}),(0,p.jsx)(E.ScrollArea,{ref:L,className:"w-[10.5rem] pr-1 aspect-video hidden @lg:block",children:(0,p.jsxs)(N.iA,{className:C().className,children:[(0,p.jsx)(N.xD,{children:(0,p.jsxs)(N.SC,{className:"text-muted-foreground",children:[(0,p.jsx)(R,{active:c===r.length,undoCount:c,scrollAreaRef:L,isTableCell:!0,noStyles:!0,children:"No."}),(0,p.jsx)(N.pj,{children:"White"}),(0,p.jsx)(N.pj,{children:"Black"})]})}),(0,p.jsx)(N.RM,{children:X(r).map((e,t)=>(0,p.jsxs)(N.SC,{children:[(0,p.jsxs)(N.pj,{children:[t+1,"."]}),(0,p.jsx)(R,{onClick:()=>{A(r.slice(0,2*t+1)),o(r.length-2*t-1)},active:c===r.length-2*t-1,undoCount:c,scrollAreaRef:L,isTableCell:!0,children:e[0]}),(0,p.jsx)(R,{onClick:()=>{A(r.slice(0,2*t+2)),o(r.length-2*t-2)},active:c===r.length-2*t-2,undoCount:c,scrollAreaRef:L,isTableCell:!0,children:e[1]})]},t))}),(0,p.jsx)(N.yt,{children:(0,p.jsxs)(N.SC,{children:[(0,p.jsx)(N.pj,{className:"font-bold text-right",children:l.split("-")[0]}),(0,p.jsx)(N.pj,{className:"font-bold text-center",children:"-"}),(0,p.jsx)(N.pj,{className:"font-bold",children:l.split("-")[1]})]})})]})}),(0,p.jsxs)(E.ScrollArea,{ref:O,className:"@lg:hidden w-full pb-2 text-nowrap",children:[(0,p.jsx)(R,{active:c===r.length,undoCount:c,scrollAreaRef:O,noStyles:!0}),(0,p.jsxs)("div",{className:(0,M.cn)("flex gap-4 w-full",C().className),children:[X(r).map((e,t)=>(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsxs)("div",{children:[t+1,"."]}),(0,p.jsx)(R,{onClick:()=>{A(r.slice(0,2*t+1)),o(r.length-2*t-1)},active:c===r.length-2*t-1,undoCount:c,scrollAreaRef:O,children:e[0]}),(0,p.jsx)(R,{onClick:()=>{A(r.slice(0,2*t+2)),o(r.length-2*t-2)},active:c===r.length-2*t-2,undoCount:c,scrollAreaRef:O,children:e[1]})]},t)),(0,p.jsx)("div",{className:"font-bold whitespace-nowrap",children:l.replace("-"," - ")})]}),(0,p.jsx)(E.ScrollBar,{orientation:"horizontal"})]})]})]})}function J(e){let t="";for(let n=0;n<e.length;n++){let r=e[n];n%2==0?t+="".concat(Math.floor(n/2)+1,". ").concat(r," "):t+="".concat(r," ")}return t.trim()}function X(e){return 0===e.length?[]:[[e[0]||"",e[1]||""],...X(e.slice(2))]}},3263:function(e,t,n){"use strict";n.d(t,{OngoingRoundContent:function(){return p}});var r=n(7437),l=n(2265),a=n(1629),s=n(9227),i=n(2381),c=n(3804),o=n(4224),d=n(2451),u=n(407),f=n(2300),h=n(3448);function m(){return(0,r.jsx)("div",{className:"@container",children:(0,r.jsxs)("div",{className:"flex flex-col @lg:flex-row gap-2",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between w-full p-2 bg-gray-800",children:[(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 h-4 w-1/3"}),(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 h-4 w-1/6"})]}),(0,r.jsx)("div",{className:"aspect-square grid grid-cols-8 grid-rows-8 relative",children:Array.from({length:64}).map((e,t)=>{let n=(Math.floor(t/8)+t%8)%2==0;return(0,r.jsx)("div",{className:(0,h.cn)("animate-pulse",n?"bg-gray-300":"bg-gray-500")},t)})}),(0,r.jsxs)("div",{className:"flex justify-between w-full p-2 bg-gray-200",children:[(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 h-4 w-1/3"}),(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 h-4 w-1/6"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.z,{className:"w-full",disabled:!0,children:(0,r.jsx)(o.Z,{})}),(0,r.jsx)(i.z,{className:"w-full",disabled:!0,children:(0,r.jsx)(d.Z,{})}),(0,r.jsx)(i.z,{className:"w-full",disabled:!0,children:(0,r.jsx)(u.Z,{})}),(0,r.jsx)(i.z,{className:"w-full",disabled:!0,children:(0,r.jsx)(f.Z,{})})]})]}),(0,r.jsx)("div",{className:"w-[10.5rem] pr-1 aspect-video overflow-hidden hidden @lg:block",children:(0,r.jsxs)(c.iA,{children:[(0,r.jsx)(c.xD,{children:(0,r.jsxs)(c.SC,{children:[(0,r.jsx)(c.pj,{children:(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-3"})}),(0,r.jsx)(c.pj,{children:(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-6"})}),(0,r.jsx)(c.pj,{children:(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-6"})})]})}),(0,r.jsx)(c.RM,{children:Array.from({length:10}).map((e,t)=>(0,r.jsxs)(c.SC,{children:[(0,r.jsx)(c.pj,{children:(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-3"})}),(0,r.jsx)(c.pj,{children:(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-6"})}),(0,r.jsx)(c.pj,{children:(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-6"})})]},t))}),(0,r.jsx)(c.yt,{children:(0,r.jsxs)(c.SC,{children:[(0,r.jsx)(c.pj,{children:(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-3 grid justify-self-end"})}),(0,r.jsx)(c.pj,{className:"",children:(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-3 grid justify-self-center"})}),(0,r.jsx)(c.pj,{children:(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-3"})})]})})]})}),(0,r.jsxs)("div",{className:"w-full pb-2 @lg:hidden",children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{className:"flex gap-4 w-full overflow-hidden",children:Array.from({length:10}).map((e,t)=>(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-3"}),(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-6"}),(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 dark:bg-gray-200 h-4 w-6"})]},t))})]})]})})}function p(e){let{roundId:t}=e,[n,i]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=null,n=null,r=!1;async function l(){let e=(await fetch("https://lichess.org/api/broadcast/round/".concat(t,".pgn")).then(e=>e.text())).split("\n\n\n").filter(e=>""!==e).map(e=>(0,a.K)(e)),n=await fetch("https://lichess.org/api/broadcast/-/-/".concat(t)).then(e=>e.json());i(e.map((e,t)=>{var r;return{...e,thinkTime:(null===(r=n.games[t])||void 0===r?void 0:r.thinkTime)||0}}))}return l(),function s(){(e=new WebSocket("".concat("ws://localhost:8080","/").concat(t))).addEventListener("open",()=>{console.log("WebSocket connected")}),e.addEventListener("message",e=>{for(let t of e.data.split("\n\n\n").filter(e=>""!==e)){let e=(0,a.K)(t);i(t=>t.map(t=>t.white.name===e.white.name&&t.black.name===e.black.name?{...e,thinkTime:0!==t.thinkTime?0:t.thinkTime}:t))}}),e.addEventListener("close",()=>{console.log("WebSocket closed"),r||(console.log("Reconnecting in 5 seconds..."),n=setTimeout(()=>{l(),s()},5e3))}),e.addEventListener("error",()=>{null==e||e.close()})}(),()=>{r=!0,n&&clearTimeout(n),null==e||e.close()}},[t]),0===n.length?Array.from({length:6}).map((e,t)=>(0,r.jsx)(m,{},t)):(0,r.jsx)(r.Fragment,{children:n.map(e=>(0,r.jsx)(s.DGTBoard,{gameData:e},e.white.name+e.black.name))})}},2381:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(7437),l=n(2265),a=n(7053),s=n(7712),i=n(3448);let c=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=l.forwardRef((e,t)=>{let{className:n,variant:l,size:s,asChild:o=!1,...d}=e,u=o?a.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(c({variant:l,size:s,className:n})),ref:t,...d})});o.displayName="Button"},641:function(e,t,n){"use strict";n.d(t,{ScrollArea:function(){return i},ScrollBar:function(){return c}});var r=n(7437),l=n(2265),a=n(314),s=n(3448);let i=l.forwardRef((e,t)=>{let{className:n,children:l,...i}=e;return(0,r.jsxs)(a.fC,{ref:t,className:(0,s.cn)("relative overflow-hidden",n),...i,children:[(0,r.jsx)(a.l_,{className:"h-full w-full rounded-[inherit]",children:l}),(0,r.jsx)(c,{}),(0,r.jsx)(a.Ns,{})]})});i.displayName=a.fC.displayName;let c=l.forwardRef((e,t)=>{let{className:n,orientation:l="vertical",...i}=e;return(0,r.jsx)(a.gb,{ref:t,orientation:l,className:(0,s.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...i,children:(0,r.jsx)(a.q4,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=a.gb.displayName},3804:function(e,t,n){"use strict";n.d(t,{RM:function(){return c},SC:function(){return d},iA:function(){return s},pj:function(){return u},xD:function(){return i},yt:function(){return o}});var r=n(7437),l=n(2265),a=n(3448);let s=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",n),...l})})});s.displayName="Table";let i=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",n),...l})});i.displayName="TableHeader";let c=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",n),...l})});c.displayName="TableBody";let o=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...l})});o.displayName="TableFooter";let d=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...l})});d.displayName="TableRow",l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("th",{ref:t,className:(0,a.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...l})}).displayName="TableHead";let u=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("td",{ref:t,className:(0,a.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...l})});u.displayName="TableCell",l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",n),...l})}).displayName="TableCaption"},7168:function(e,t,n){"use strict";n.d(t,{Tabs:function(){return i},TabsContent:function(){return d},TabsList:function(){return c},TabsTrigger:function(){return o}});var r=n(7437),l=n(2265),a=n(891),s=n(3448);let i=a.fC,c=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(a.aV,{ref:t,className:(0,s.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...l})});c.displayName=a.aV.displayName;let o=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(a.xz,{ref:t,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...l})});o.displayName=a.xz.displayName;let d=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(a.VY,{ref:t,className:(0,s.cn)("mt-2 focus-visible:outline-none",n),...l})});d.displayName=a.VY.displayName},4090:function(e,t,n){"use strict";n.d(t,{O:function(){return l}});var r=n(2265);function l(e,t,n){let l=(0,r.useRef)(t);(0,r.useEffect)(()=>{l.current=t},[t]),(0,r.useEffect)(()=>{let t=e=>l.current(e);return null!=n?n.addEventListener(e,t):window.addEventListener(e,t),()=>{null!=n?n.removeEventListener(e,t):window.removeEventListener(e,t)}},[e,n])}},7254:function(e,t,n){"use strict";function r(e){if(null==e)return"01:30:00";if(e<=0)return"00:00:00";let t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat((e-3600*t-60*n).toString().padStart(2,"0"))}n.d(t,{ZC:function(){return r}}),new Intl.NumberFormat("en-US",{currency:"CAD",style:"currency",minimumFractionDigits:2}),new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",timeZone:"UTC"})},1629:function(e,t,n){"use strict";function r(e){return e.split(" ")[0].split("/").map(e=>{let t=[];for(let n of e)isNaN(Number(n))?t.push(n):t.push(...Array(Number(n)).fill(null));return t})}function l(e){let t=e.split("\n"),n={white:{name:"",elo:"",timestamps:[]},black:{name:"",elo:"",timestamps:[]},result:"*",moves:[]};for(let e of t)if(e.startsWith('[White "'))n.white.name=e.split('"')[1];else if(e.startsWith('[Black "'))n.black.name=e.split('"')[1];else if(e.startsWith('[WhiteElo "'))n.white.elo=e.split('"')[1];else if(e.startsWith('[BlackElo "'))n.black.elo=e.split('"')[1];else if(e.startsWith('[Result "'))n.result=e.split('"')[1];else if(e.startsWith('[WhiteTitle "'))n.white.title=e.split('"')[1];else if(e.startsWith('[BlackTitle "'))n.black.title=e.split('"')[1];else if(e.startsWith("1.")){let t=[];for(let r of e.split(" ").filter(e=>/^[a-zA-Z0-9+#=-]+$/.test(e)&&e!==n.result))t.push(r);n.moves=t;let r=[],l=[],a=e.split("}");for(let e=0;e<a.length;e++){let t=a[e].match(/\d+:\d+:\d+|\d+:\d+/);if(!t)continue;let n=t[0].split(":").map(Number),s=3600*n[0]+60*n[1]+n[2];e%2==0&&null!=s?r.push(s):null!=s&&l.push(s)}n.white.timestamps=r,n.black.timestamps=l}return n}n.d(t,{K:function(){return l},S:function(){return r}})},3448:function(e,t,n){"use strict";n.d(t,{cn:function(){return a}});var r=n(1994),l=n(3335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,l.m6)((0,r.W)(t))}n(7254)}},function(e){e.O(0,[555,137,731,891,254,971,117,744],function(){return e(e.s=4929)}),_N_E=e.O()}]);